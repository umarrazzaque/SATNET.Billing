@model SATNET.WebApp.Models.Report.ReceivablePerCategoryViewModel
<div id="MainContents">

    <div class="app-page-title">
        <div class="page-title-wrapper">
            <div class="page-title-heading">

                <div>
                    <div class="page-title-subheading">
                    </div>
                </div>
            </div>
            <div class="page-title-actions">

                <div class="d-inline-block dropdown">
                    @await Html.PartialAsync("_Export")
                </div>
            </div>
        </div>
    </div>

    <div class="filters">
        <div class="row">
            @if (ViewBag.CustomerSelectList != null)
            {
                <div class="col-lg-2">
                    <div class="position-relative form-group">
                        <label>Customer</label>
                        <select id="selectCustomer" type="select" class="form-control" asp-items="ViewBag.CustomerSelectList">
                            <option value="0" selected>All</option>
                        </select>
                    </div>
                </div>

            }
        </div>
    </div>


    <div id="BodyContent">
        @await Html.PartialAsync("ReceivableByCategory/_List")
    </div>
</div>

@section Scripts{
    <script type="text/javascript">
        $(function () {
            var _customerId = 0;
            if (@ViewBag.CustomerId != null) {
                _customerId=@ViewBag.CustomerId;
            }
            $(".filters select#selectCustomer").change(function () {
                var customerId = $(this).val();
                GetReceivableReport(customerId, 0, null,null);
            });
        });

        GetReceivableReport = function (customerId) {
            $.ajax(
                {
                    url: '/Reporting/GetAjaxReceivableReport',
                    data: { customerId: customerId, siteId: 0 },
                    type: 'get',
                    dataType: "html",
                    success: function (html) {
                        if (html !== null) {
                            $("#BodyContent").html(html);
                        }
                    },
                    error: function () {
                        alert('Error occurred while processing the request.');
                    }
                });
        }


    </script>
}

@section Styles{
    <style>
        table#grid_table tr.header th {
            text-align: center;
            font-size: medium;
        }

        table#grid_table th, td {
            border: 1px solid #dfe1e6;
        }

        table#grid_table tr.site-footer td {
            font-weight: bold;
        }
    </style>
}